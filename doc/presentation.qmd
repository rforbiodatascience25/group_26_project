---
title: "Global Tuberculosis cases - WHO 2025 report\nProject Presentation - 22160 R for Bio Data Science"
authors: "Henrik (s215065), Felipe (s252623), Lun (s253705),\
Bhavya (s252641), Dhruva (s225191)"
date: "2 dec 2025"

format:
  revealjs:
    slide-number: true
    footer: ""
    css: styles.css
    code-font-size: "0.7em"
---

**1) Introduction to the data**

Write your introduction here.

-   What data?
-   From where?
-   Purpose?

::: column-margin
**Insert an image**

![](placeholder_image.png){width="200"}
:::

------------------------------------------------------------------------

**2) Cleaning the data**

::: column-margin
**Insert an image**

![](placeholder_image.png){width="200"}
:::

```{r}
#| echo: true
#| eval: true

#Optional: Insert some of the code we used for cleaning the data. 

print("Hello world")

```

------------------------------------------------------------------------

**3) Augmenting the data. e.g. standardardized (pr. 100k) vs normal**

**Joining datasets:**
``` r
#Code for joining dataset (2024):

#Making dataset containing all population data (2024) for every country. 
population_data_2024 <- TB_burden |>
  select(country, e_pop_num, year) |>
  filter(year == 2024) |>
  rename(population_size = e_pop_num)
TB_age_sex <- left_join(TB_age_sex, population_data_2024, by = c("country", "year"))
```

``` r
#Code for joining dataset (2015-2024):
TB_10_years <- inner_join(TB_burden, mdr_rr_data, by = c("country", "year"))
TB_10_years <- inner_join(TB_10_years, ltbi_data, by = c("country", "year"))
```

The datasets contain TB cases for a given country. However, having a large population size (India and China), will also cause the overall TB cases to be larger for such countries.

**Solution:** Standardize the data! (I.e. amount of people with TB out of every pr. 100,000 citizen).

``` r
#Data augmentation - Calculating the TB cases pr. 100k (standardizing the data): 

TB_age_sex <- TB_age_sex |>
  group_by(country) |>
  
  #Getting the total sum of TB cases for every country
  mutate( 
    total_TB_cases_best = sum(TB_cases_best), 
    total_TB_cases_min = sum(TB_cases_min), 
    total_TB_cases_max = sum(TB_cases_max)
    ) |> 
      #calculate the pr. 100k amount of cases
  mutate( 
        TB_cases_pr_100k_best = TB_cases_best/population_size*10^5,
        TB_cases_pr_100k_min = TB_cases_min/population_size*10^5,
        TB_cases_pr_100k_max = TB_cases_max/population_size*10^5,
        )
```
**Note**: We also got the population size from another dataset, which we joined with.

Top 3 countries with most TB cases (**total**): India, Indonesia, Philippines. 

Top 3 TB burdened countries (**standardized**): Kiribati, Papua New Guinea, Philippines.



------------------------------------------------------------------------

**4) Analysis - 2024 dataset - TB + Risk factor distribution**

**Bar chart - TB + Risk factor cases in the top 10 most TB burdened countries:**

``` r
#Code for making the plot of the TB + risk factor cases:
TB_age_sex |>
  filter(country %in% top_10_countries_100k) |>
  group_by(country, risk_factor) |>
  filter(risk_factor != "no risk factor") |>
  summarise(
    TB_cases_best = sum(TB_cases_best),
    TB_cases_min = sum(TB_cases_min),
    TB_cases_max = sum(TB_cases_max),
    population_size = first(population_size),
    TB_cases_best_100k = TB_cases_best/population_size*10^5,
    TB_cases_min_100k = TB_cases_min/population_size*10^5,
    TB_cases_max_100k = TB_cases_max/population_size*10^5,
  ) #... followed by ggplot
```

::: column-margin
**Bar chart of the risk factor distribution:** **(Without the 'no risk factor' label)**

![](../results/06_1_riskfactor_barchart.png){width="100"}
:::

**Box plots of the global risk factor distribution:**

``` r
TB_age_sex |>
  group_by(country, risk_factor) |>
  filter(risk_factor != "no risk factor") |>
  summarise(
    TB_cases_best = sum(TB_cases_best),
    TB_cases_min = sum(TB_cases_min),
    TB_cases_max = sum(TB_cases_max),
    population_size = first(population_size),
    
    TB_cases_best_100k = TB_cases_best/population_size*10^5,
    TB_cases_min_100k = TB_cases_min/population_size*10^5,
    TB_cases_max_100k = TB_cases_max/population_size*10^5,
  ) #... followed by ggplot
```

::: column-margin
**Box plot:**

![](../results/06_2_riskfactor_boxplot.png){width="100"}
:::

------------------------------------------------------------------------

**5) Analysis 2 - part 1**

(E.g. global cases)

------------------------------------------------------------------------

**6) Analysis 2 - part 2**

(E.g. age distribution)

------------------------------------------------------------------------

**7) Analysis 1 - part 1**

(World map plots)

------------------------------------------------------------------------

**8) Analysis 1 - part 2**

(Household contacts)

------------------------------------------------------------------------

**9) Analysis 1 - part 3**

(linear models for drug resistance and mortality in the countries. Maybe also include the stuff on detection rate).

------------------------------------------------------------------------

**10) Conclusion/ wrapping up**

(Heatmaps and PCA for analysis 2)
